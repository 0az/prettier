#!/usr/bin/env node

const fs = require("fs");
const minimist = require("minimist");
const jscodefmt = require("../index");

const argv = minimist(process.argv.slice(2), {
  boolean: ["write", "useFlowParser", "bracket-spacing", "single-quotes"]
});

const filename = argv["_"][0];
const write = argv['write'];

const output = jscodefmt.format(fs.readFileSync(filename, "utf8"), {
  printWidth: argv['print-width'],
  tabWidth: argv['tab-width'],
  bracketSpacing: argv['bracket-spacing'],
  useFlowParser: argv['flow-parser'],
  quote: argv["single-quotes"] ? "single" : "double"
});

if(write) {
  fs.writeFileSync(filename, output, "utf8");
}
else {
  console.log(output);
}
